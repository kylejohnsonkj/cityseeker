var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let a;function u(t,e){return a||(a=document.createElement("a")),a.href=e,t===a.href}function c(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(t,e,n,r){if(t){const i=f(t,e,n,r);return t[0](i)}}function f(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function d(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function h(t,e,n,r,i,o){if(i){const s=f(e,n,r,o);t.p(s,i)}}function p(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function g(t,e,n){return t.set(n),e}const m="undefined"!=typeof window;let y=m?()=>window.performance.now():()=>Date.now(),$=m?t=>requestAnimationFrame(t):t;const v=new Set;function x(t){v.forEach((e=>{e.c(t)||(v.delete(e),e.f())})),0!==v.size&&$(x)}function w(t,e){t.appendChild(e)}function b(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function _(t){const e=C("style");return function(t,e){w(t.head||t,e),e.sheet}(b(t),e),e.sheet}function k(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode&&t.parentNode.removeChild(t)}function C(t){return document.createElement(t)}function R(t){return document.createTextNode(t)}function M(){return R(" ")}function E(){return R("")}function A(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function O(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function T(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function z(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function I(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}const N=new Map;let F,L=0;function j(t,e,n,r,i,o,s,a=0){const u=16.666/r;let c="{\n";for(let t=0;t<=1;t+=u){const r=e+(n-e)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const l=c+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${a}`,d=b(t),{stylesheet:h,rules:p}=N.get(d)||function(t,e){const n={stylesheet:_(e),rules:{}};return N.set(t,n),n}(d,t);p[f]||(p[f]=!0,h.insertRule(`@keyframes ${f} ${l}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${f} ${r}ms linear ${i}ms 1 both`,L+=1,f}function D(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),L-=i,L||$((()=>{L||(N.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&S(e)})),N.clear())})))}function G(t){F=t}function P(){if(!F)throw new Error("Function called outside component initialization");return F}function q(t){P().$$.on_destroy.push(t)}function W(){const t=P();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=I(e,n,{cancelable:r});return i.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function U(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const B=[],H=[],Z=[],K=[],J=Promise.resolve();let V=!1;function Y(t){Z.push(t)}const X=new Set;let Q,tt=0;function et(){if(0!==tt)return;const t=F;do{try{for(;tt<B.length;){const t=B[tt];tt++,G(t),nt(t.$$)}}catch(t){throw B.length=0,tt=0,t}for(G(null),B.length=0,tt=0;H.length;)H.pop()();for(let t=0;t<Z.length;t+=1){const e=Z[t];X.has(e)||(X.add(e),e())}Z.length=0}while(B.length);for(;K.length;)K.pop()();V=!1,X.clear(),G(t)}function nt(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Y)}}function rt(t,e,n){t.dispatchEvent(I(`${e?"intro":"outro"}${n}`))}const it=new Set;let ot;function st(){ot={r:0,c:[],p:ot}}function at(){ot.r||i(ot.c),ot=ot.p}function ut(t,e){t&&t.i&&(it.delete(t),t.i(e))}function ct(t,e,n,r){if(t&&t.o){if(it.has(t))return;it.add(t),ot.c.push((()=>{it.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}const lt={duration:0};function ft(n,r,s,a){const u={direction:"both"};let c=r(n,s,u),l=a?0:1,f=null,d=null,h=null;function p(){h&&D(n,h)}function g(t,e){const n=t.b-l;return e*=Math.abs(n),{a:l,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function m(r){const{delay:o=0,duration:s=300,easing:a=e,tick:u=t,css:m}=c||lt,w={start:y()+o,b:r};r||(w.group=ot,ot.r+=1),f||d?d=w:(m&&(p(),h=j(n,l,r,s,o,a,m)),r&&u(0,1),f=g(w,s),Y((()=>rt(n,r,"start"))),function(t){let e;0===v.size&&$(x),new Promise((n=>{v.add(e={c:t,f:n})}))}((t=>{if(d&&t>d.start&&(f=g(d,s),d=null,rt(n,f.b,"start"),m&&(p(),h=j(n,l,f.b,f.duration,0,a,c.css))),f)if(t>=f.end)u(l=f.b,1-l),rt(n,f.b,"end"),d||(f.b?p():--f.group.r||i(f.group.c)),f=null;else if(t>=f.start){const e=t-f.start;l=f.a+f.d*a(e/f.duration),u(l,1-l)}return!(!f&&!d)})))}return{run(t){o(c)?(Q||(Q=Promise.resolve(),Q.then((()=>{Q=null}))),Q).then((()=>{c=c(u),m(t)})):m(t)},end(){p(),f=d=null}}}function dt(t){t&&t.c()}function ht(t,e,r,s){const{fragment:a,after_update:u}=t.$$;a&&a.m(e,r),s||Y((()=>{const e=t.$$.on_mount.map(n).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...e):i(e),t.$$.on_mount=[]})),u.forEach(Y)}function pt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gt(t,e){-1===t.$$.dirty[0]&&(B.push(t),V||(V=!0,J.then(et)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function mt(e,n,o,s,a,u,c,l=[-1]){const f=F;G(e);const d=e.$$={fragment:null,ctx:[],props:u,update:t,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:l,skip_bound:!1,root:n.target||f.$$.root};c&&c(d.root);let h=!1;if(d.ctx=o?o(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),h&&gt(e,t)),n})):[],d.update(),h=!0,i(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(S)}else d.fragment&&d.fragment.c();n.intro&&ut(e.$$.fragment),ht(e,n.target,n.anchor,n.customElement),et()}G(f)}class yt{$destroy(){pt(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function $t(t){const e=t-1;return e*e*e+1}function vt(t,{delay:n=0,duration:r=400,easing:i=e}={}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:i,css:t=>"opacity: "+t*o}}function xt(t,{delay:e=0,duration:n=400,easing:r=$t}={}){const i=getComputedStyle(t),o=+i.opacity,s=parseFloat(i.height),a=parseFloat(i.paddingTop),u=parseFloat(i.paddingBottom),c=parseFloat(i.marginTop),l=parseFloat(i.marginBottom),f=parseFloat(i.borderTopWidth),d=parseFloat(i.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*o};height: ${t*s}px;padding-top: ${t*a}px;padding-bottom: ${t*u}px;margin-top: ${t*c}px;margin-bottom: ${t*l}px;border-top-width: ${t*f}px;border-bottom-width: ${t*d}px;`}}function wt(t,{delay:e=0,duration:n=400,easing:r=$t,start:i=0,opacity:o=0}={}){const s=getComputedStyle(t),a=+s.opacity,u="none"===s.transform?"":s.transform,c=1-i,l=a*(1-o);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${u} scale(${1-c*e});\n\t\t\topacity: ${a-l*e}\n\t\t`}}function bt(t){let e,n,r,i,o,s,a,u,c,l,f,d,h,p,g=t[2]+1+"",m=t[0].maxRounds+"";return{c(){e=C("div"),n=C("span"),r=R("Round "),i=C("span"),o=R(g),s=R(" of "),a=R(m),u=M(),c=C("span"),l=R("Region: "),f=C("span"),d=R(t[3]),O(i,"class","round svelte-11j245y"),O(n,"class","roundSpan"),O(f,"class","region svelte-11j245y"),O(c,"class","regionSpan svelte-11j245y"),O(e,"class","info svelte-11j245y")},m(t,h){k(t,e,h),w(e,n),w(n,r),w(n,i),w(i,o),w(n,s),w(n,a),w(e,u),w(e,c),w(c,l),w(c,f),w(f,d),p=!0},p(t,e){(!p||4&e)&&g!==(g=t[2]+1+"")&&T(o,g),(!p||1&e)&&m!==(m=t[0].maxRounds+"")&&T(a,m),(!p||8&e)&&T(d,t[3])},i(t){p||(Y((()=>{h||(h=ft(e,xt,{},!0)),h.run(1)})),p=!0)},o(t){h||(h=ft(e,xt,{},!1)),h.run(0),p=!1},d(t){t&&S(e),t&&h&&h.end()}}}function _t(t){let e,n,r,s,a,c,l,f,d,h,p,g,m=""!=t[3]&&bt(t);return{c(){e=C("nav"),n=C("button"),n.innerHTML='<img src="images/help.svg" alt="Help"/>',r=M(),s=C("div"),a=C("img"),l=M(),m&&m.c(),f=M(),d=C("button"),d.innerHTML='<img src="images/stats.svg" alt="Stats"/>',O(n,"class","svelte-11j245y"),O(a,"id","logo"),u(a.src,c="images/logo.svg")||O(a,"src","images/logo.svg"),O(a,"alt","City Seeker"),O(a,"class","svelte-11j245y"),O(s,"class","title-container svelte-11j245y"),O(d,"class","svelte-11j245y"),O(e,"class","svelte-11j245y")},m(i,u){k(i,e,u),w(e,n),w(e,r),w(e,s),w(s,a),w(s,l),m&&m.m(s,null),w(e,f),w(e,d),h=!0,p||(g=[A(n,"click",(function(){o(t[1].toggleHelp)&&t[1].toggleHelp.apply(this,arguments)})),A(d,"click",(function(){o(t[0].restartGame)&&t[0].restartGame.apply(this,arguments)}))],p=!0)},p(e,[n]){""!=(t=e)[3]?m?(m.p(t,n),8&n&&ut(m,1)):(m=bt(t),m.c(),ut(m,1),m.m(s,null)):m&&(st(),ct(m,1,1,(()=>{m=null})),at())},i(t){h||(ut(m),h=!0)},o(t){ct(m),h=!1},d(t){t&&S(e),m&&m.d(),p=!1,i(g)}}}function kt(t,e,n){let{lights:r}=e,{modal:i}=e,o=r._getCurrentRound(),s="";return t.$$set=t=>{"lights"in t&&n(0,r=t.lights),"modal"in t&&n(1,i=t.modal)},[r,i,o,s,function(t){n(2,o=t)},function(t){n(3,s=t)}]}class St extends yt{constructor(t){super(),mt(this,t,kt,_t,s,{lights:0,modal:1,updateCurrentRound:4,updateRegion:5})}get updateCurrentRound(){return this.$$.ctx[4]}get updateRegion(){return this.$$.ctx[5]}}const Ct=[];function Rt(e,n=t){let r;const i=new Set;function o(t){if(s(e,t)&&(e=t,r)){const t=!Ct.length;for(const t of i)t[1](),Ct.push(t,e);if(t){for(let t=0;t<Ct.length;t+=2)Ct[t][0](Ct[t+1]);Ct.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,a=t){const u=[s,a];return i.add(u),1===i.size&&(r=n(o)||t),s(e),()=>{i.delete(u),0===i.size&&(r(),r=null)}}}}function Mt(t,e,n){const r=t.slice();return r[35]=e[n],r}function Et(t){let e,n=t[1][t[35]].emoji+" ";return{c(){e=R(n)},m(t,n){k(t,e,n)},p(t,r){4&r[0]&&n!==(n=t[1][t[35]].emoji+" ")&&T(e,n)},d(t){t&&S(e)}}}function At(e){let n,r=e[2],i=[];for(let t=0;t<r.length;t+=1)i[t]=Et(Mt(e,r,t));return{c(){n=C("div");for(let t=0;t<i.length;t+=1)i[t].c();O(n,"class","lights svelte-1te4ulu")},m(t,e){k(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,e){if(6&e[0]){let o;for(r=t[2],o=0;o<r.length;o+=1){const s=Mt(t,r,o);i[o]?i[o].p(s,e):(i[o]=Et(s),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&S(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(i,t)}}}function Ot(){return 10}function Tt(e,n,r){let i,o=t;e.$$.on_destroy.push((()=>o()));const s=5,a=6,u=5;let{map:l}=n,{actions:f}=n,{nav:d}=n;const h=localStorage.getItem("guessesGrid"),p=Rt(JSON.parse(h)||_());o(),o=c(p,(t=>r(29,i=t))),p.subscribe((t=>{localStorage.setItem("guessesGrid",JSON.stringify(t))})),console.table(i);let m=b(),y=w(),$=R();function v(){g(p,i=_(),i),m=b(),r(2,y=w()),$=R(),l.nextRound(!0),d.updateCurrentRound(m),f.updateScore(x()),console.log("restarted game")}function x(){return i.reduce(((t,e)=>{const n=e.filter((t=>0!==t)).length;return t+(e[n-1]!==u?0:11-n)}),0)}function w(){return m==s?i[s-1]:i[m]}function b(){let t=i.findLastIndex((t=>0!==t[0])),e=i.findIndex((t=>0==t[0]));return-1!==t?t:-1!==e?e:s}function _(){const t=[];for(let e=0;e<s;e++)t.push(new Array(a).fill(0));return t}function k(t){let e="";for(let n=0;n<a;n++)e+=C[t[n]].emoji;return e}i.length==s&&i[0].length==a||v();class S{constructor(t,e,n,r){this.accuracy=t,this.emoji=e,this.radius=n,this.color=r}}const C={0:new S(0,"⚪️",null,null),1:new S(1,"⚫️",null,null),2:new S(2,"🔴",750,"#D11716"),3:new S(3,"🟠",500,"#E17F01"),4:new S(4,"🟡",250,"#FED703"),5:new S(5,"🟢",75,"#06AE01")};function R(){if(m==s)return a;const t=i[m].indexOf(0);return-1!=t?t:a}return e.$$set=t=>{"map"in t&&r(6,l=t.map),"actions"in t&&r(7,f=t.actions),"nav"in t&&r(8,d=t.nav)},[p,C,y,s,a,u,l,f,d,v,x,function(){return 10*s},b,function(){return m},function(){$=0,m++,r(2,y=i[m]),d.updateCurrentRound(m)},function(){let t="";for(let e=0;e<s;e++)t+=k(i[e])+"\n";return t},function(){return b()<s-1},function(){return y[$-1]!==u?0:11-$},Ot,function(t){0==$&&l.clearSavedMarkers(),r(2,y[$]=t,y),g(p,i[m]=y,i),$++,f.updateScore(x())},function(t){return t<C[5].radius?5:t<C[4].radius?4:t<C[3].radius?3:t<C[2].radius?2:1},R,function(){return y[$]},function(){return m==s||$==a||y[$-1]==u},function(){return $==a&&y[$-1]!=u},function(t){return 1==y.filter((t=>0!=t)).filter((e=>t<=e)).length},function(){return 0==m&&0==$}]}class zt extends yt{constructor(t){super(),mt(this,t,Tt,At,s,{maxRounds:3,maxGuesses:4,winAccuracy:5,map:6,actions:7,nav:8,guessesGrid:0,restartGame:9,getScore:10,getMaxScore:11,getCurrentRound:12,_getCurrentRound:13,resetForNextRound:14,getGuessesGridAsEmoji:15,hasNextRound:16,getRoundScore:17,getMaxRoundScore:18,guessMap:1,makeGuess:19,getGuessAccuracy:20,getCurrentGuess:21,getLatestGuessAccuracy:22,isGameOver:23,didFail:24,isBestGuessSoFar:25,isStartOfGame:26},null,[-1,-1])}get maxRounds(){return this.$$.ctx[3]}get maxGuesses(){return this.$$.ctx[4]}get winAccuracy(){return this.$$.ctx[5]}get guessesGrid(){return this.$$.ctx[0]}get restartGame(){return this.$$.ctx[9]}get getScore(){return this.$$.ctx[10]}get getMaxScore(){return this.$$.ctx[11]}get getCurrentRound(){return this.$$.ctx[12]}get _getCurrentRound(){return this.$$.ctx[13]}get resetForNextRound(){return this.$$.ctx[14]}get getGuessesGridAsEmoji(){return this.$$.ctx[15]}get hasNextRound(){return this.$$.ctx[16]}get getRoundScore(){return this.$$.ctx[17]}get getMaxRoundScore(){return Ot}get guessMap(){return this.$$.ctx[1]}get makeGuess(){return this.$$.ctx[19]}get getGuessAccuracy(){return this.$$.ctx[20]}get getCurrentGuess(){return this.$$.ctx[21]}get getLatestGuessAccuracy(){return this.$$.ctx[22]}get isGameOver(){return this.$$.ctx[23]}get didFail(){return this.$$.ctx[24]}get isBestGuessSoFar(){return this.$$.ctx[25]}get isStartOfGame(){return this.$$.ctx[26]}}var It="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Nt(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){if(this instanceof t){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(e,n))}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})})),n}var Ft={};({get exports(){return Ft},set exports(t){Ft=t}}).exports=function t(){var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},n=!e.document&&!!e.postMessage,r=n&&/blob:/i.test((e.location||{}).protocol),i={},o=0,s={parse:function(n,r){var a=(r=r||{}).dynamicTyping||!1;if(w(a)&&(r.dynamicTypingFunction=a,a={}),r.dynamicTyping=a,r.transform=!!w(r.transform)&&r.transform,r.worker&&s.WORKERS_SUPPORTED){var u=function(){if(!s.WORKERS_SUPPORTED)return!1;var n,r,a=(n=e.URL||e.webkitURL||null,r=t.toString(),s.BLOB_URL||(s.BLOB_URL=n.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),u=new e.Worker(a);return u.onmessage=m,u.id=o++,i[u.id]=u}();return u.userStep=r.step,u.userChunk=r.chunk,u.userComplete=r.complete,u.userError=r.error,r.step=w(r.step),r.chunk=w(r.chunk),r.complete=w(r.complete),r.error=w(r.error),delete r.worker,void u.postMessage({input:n,config:r,workerId:u.id})}var h=null;return s.NODE_STREAM_INPUT,"string"==typeof n?h=r.download?new c(r):new f(r):!0===n.readable&&w(n.read)&&w(n.on)?h=new d(r):(e.File&&n instanceof File||n instanceof Object)&&(h=new l(r)),h.stream(n)},unparse:function(t,e){var n=!1,r=!0,i=",",o="\r\n",a='"',u=a+a,c=!1,l=null,f=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||s.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(i=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(c=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(a=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");l=e.columns}void 0!==e.escapeChar&&(u=e.escapeChar+a),("boolean"==typeof e.escapeFormulae||e.escapeFormulae instanceof RegExp)&&(f=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var d=new RegExp(p(a),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return h(null,t,c);if("object"==typeof t[0])return h(l||Object.keys(t[0]),t,c)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||l),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),h(t.fields||[],t.data||[],c);throw new Error("Unable to serialize unrecognized input");function h(t,e,n){var s="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&0<t.length,u=!Array.isArray(e[0]);if(a&&r){for(var c=0;c<t.length;c++)0<c&&(s+=i),s+=g(t[c],c);0<e.length&&(s+=o)}for(var l=0;l<e.length;l++){var f=a?t.length:e[l].length,d=!1,h=a?0===Object.keys(e[l]).length:0===e[l].length;if(n&&!a&&(d="greedy"===n?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===n&&a){for(var p=[],m=0;m<f;m++){var y=u?t[m]:m;p.push(e[l][y])}d=""===p.join("").trim()}if(!d){for(var $=0;$<f;$++){0<$&&!h&&(s+=i);var v=a&&u?t[$]:$;s+=g(e[l][v],$)}l<e.length-1&&(!n||0<f&&!h)&&(s+=o)}}return s}function g(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var r=!1;f&&"string"==typeof t&&f.test(t)&&(t="'"+t,r=!0);var o=t.toString().replace(d,u);return(r=r||!0===n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(o,s.BAD_DELIMITERS)||-1<o.indexOf(i)||" "===o.charAt(0)||" "===o.charAt(o.length-1))?a+o+a:o}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!n&&!!e.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=g,s.ParserHandle=h,s.NetworkStreamer=c,s.FileStreamer=l,s.StringStreamer=f,s.ReadableStreamStreamer=d,e.jQuery){var a=e.jQuery;a.fn.parse=function(t){var n=t.config||{},r=[];return this.each((function(t){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:a.extend({},n)})})),i(),this;function i(){if(0!==r.length){var e,n,i,u,c=r[0];if(w(t.before)){var l=t.before(c.file,c.inputElem);if("object"==typeof l){if("abort"===l.action)return e="AbortError",n=c.file,i=c.inputElem,u=l.reason,void(w(t.error)&&t.error({name:e},n,i,u));if("skip"===l.action)return void o();"object"==typeof l.config&&(c.instanceConfig=a.extend(c.instanceConfig,l.config))}else if("skip"===l)return void o()}var f=c.instanceConfig.complete;c.instanceConfig.complete=function(t){w(f)&&f(t,c.file,c.inputElem),o()},s.parse(c.file,c.instanceConfig)}else w(t.complete)&&t.complete()}function o(){r.splice(0,1),i()}}}function u(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=v(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new h(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(t);void 0!==i&&(t=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t;this._partialLine="";var a=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var u=a.meta.cursor;this._finished||(this._partialLine=o.substring(u-this._baseIndex),this._baseIndex=u),a&&a.data&&(this._rowCount+=a.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)e.postMessage({results:a,workerId:s.WORKER_ID,finished:c});else if(w(this._config.chunk)&&!n){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!c||!w(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){w(this._config.error)?this._config.error(t):r&&this._config.error&&e.postMessage({workerId:s.WORKER_ID,error:t,finished:!1})}}function c(t){var e;(t=t||{}).chunkSize||(t.chunkSize=s.RemoteChunkSize),u.call(this,t),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),n||(e.onload=x(this._chunkLoaded,this),e.onerror=x(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var r in t)e.setRequestHeader(r,t[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}n&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var n=e.statusText||t;this._sendError(new Error(n))}}function l(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=s.LocalChunkSize),u.call(this,t);var r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=x(this._chunkLoaded,this),e.onerror=x(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,i)}var o=e.readAsText(t,this._config.encoding);r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function f(t){var e;u.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=e.substring(0,n),e=e.substring(n)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function d(t){u.call(this,t=t||{});var e=[],n=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=x((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=x((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=x((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=x((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function h(t){var e,n,r,i=Math.pow(2,53),o=-i,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,c=this,l=0,f=0,d=!1,h=!1,m=[],y={data:[],errors:[],meta:{}};if(w(t.step)){var $=t.step;t.step=function(e){if(y=e,_())b();else{if(b(),0===y.data.length)return;l+=e.data.length,t.preview&&l>t.preview?n.abort():(y.data=y.data[0],$(y,c))}}}function x(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function b(){return y&&r&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines&&(y.data=y.data.filter((function(t){return!x(t)}))),_()&&function(){if(y)if(Array.isArray(y.data[0])){for(var e=0;_()&&e<y.data.length;e++)y.data[e].forEach(n);y.data.splice(0,1)}else y.data.forEach(n);function n(e,n){w(t.transformHeader)&&(e=t.transformHeader(e,n)),m.push(e)}}(),function(){if(!y||!t.header&&!t.dynamicTyping&&!t.transform)return y;function e(e,n){var r,i=t.header?{}:[];for(r=0;r<e.length;r++){var o=r,s=e[r];t.header&&(o=r>=m.length?"__parsed_extra":m[r]),t.transform&&(s=t.transform(s,o)),s=k(o,s),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(s)):i[o]=s}return t.header&&(r>m.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+r,f+n):r<m.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+r,f+n)),i}var n=1;return!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(e),n=y.data.length):y.data=e(y.data,0),t.header&&y.meta&&(y.meta.fields=m),f+=n,y}()}function _(){return t.header&&0===m.length}function k(e,n){return r=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[r]&&(t.dynamicTyping[r]=t.dynamicTypingFunction(r)),!0===(t.dynamicTyping[r]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(a.test(t)){var e=parseFloat(t);if(o<e&&e<i)return!0}return!1}(n)?parseFloat(n):u.test(n)?new Date(n):""===n?null:n):n;var r}function S(t,e,n,r){var i={type:t,code:e,message:n};void 0!==r&&(i.row=r),y.errors.push(i)}this.parse=function(i,o,a){var u=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var n=new RegExp(p(e)+"([^]*?)"+p(e),"gm"),r=(t=t.replace(n,"")).split("\r"),i=t.split("\n"),o=1<i.length&&i[0].length<r[0].length;if(1===r.length||o)return"\n";for(var s=0,a=0;a<r.length;a++)"\n"===r[a][0]&&s++;return s>=r.length/2?"\r\n":"\r"}(i,u)),r=!1,t.delimiter)w(t.delimiter)&&(t.delimiter=t.delimiter(i),y.meta.delimiter=t.delimiter);else{var c=function(e,n,r,i,o){var a,u,c,l;o=o||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var f=0;f<o.length;f++){var d=o[f],h=0,p=0,m=0;c=void 0;for(var y=new g({comments:i,delimiter:d,newline:n,preview:10}).parse(e),$=0;$<y.data.length;$++)if(r&&x(y.data[$]))m++;else{var v=y.data[$].length;p+=v,void 0!==c?0<v&&(h+=Math.abs(v-c),c=v):c=v}0<y.data.length&&(p/=y.data.length-m),(void 0===u||h<=u)&&(void 0===l||l<p)&&1.99<p&&(u=h,a=d,l=p)}return{successful:!!(t.delimiter=a),bestDelimiter:a}}(i,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);c.successful?t.delimiter=c.bestDelimiter:(r=!0,t.delimiter=s.DefaultDelimiter),y.meta.delimiter=t.delimiter}var l=v(t);return t.preview&&t.header&&l.preview++,e=i,n=new g(l),y=n.parse(e,o,a),b(),d?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),e=w(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(d=!1,c.streamer.parseChunk(e,!0)):setTimeout(c.resume,3)},this.aborted=function(){return h},this.abort=function(){h=!0,n.abort(),y.meta.aborted=!0,w(t.complete)&&t.complete(y),e=""}}function p(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(t){var e,n=(t=t||{}).delimiter,r=t.newline,i=t.comments,o=t.step,a=t.preview,u=t.fastMode,c=e=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(c=t.escapeChar),("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<s.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var l=0,f=!1;this.parse=function(t,s,d){if("string"!=typeof t)throw new Error("Input must be a string");var h=t.length,g=n.length,m=r.length,y=i.length,$=w(o),v=[],x=[],b=[],_=l=0;if(!t)return F();if(u||!1!==u&&-1===t.indexOf(e)){for(var k=t.split(r),S=0;S<k.length;S++){if(b=k[S],l+=b.length,S!==k.length-1)l+=r.length;else if(d)return F();if(!i||b.substring(0,y)!==i){if($){if(v=[],T(b.split(n)),L(),f)return F()}else T(b.split(n));if(a&&a<=S)return v=v.slice(0,a),F(!0)}}return F()}for(var C=t.indexOf(n,l),R=t.indexOf(r,l),M=new RegExp(p(c)+p(e),"g"),E=t.indexOf(e,l);;)if(t[l]!==e)if(i&&0===b.length&&t.substring(l,l+y)===i){if(-1===R)return F();l=R+m,R=t.indexOf(r,l),C=t.indexOf(n,l)}else if(-1!==C&&(C<R||-1===R))b.push(t.substring(l,C)),l=C+g,C=t.indexOf(n,l);else{if(-1===R)break;if(b.push(t.substring(l,R)),N(R+m),$&&(L(),f))return F();if(a&&v.length>=a)return F(!0)}else for(E=l,l++;;){if(-1===(E=t.indexOf(e,E+1)))return d||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:v.length,index:l}),I();if(E===h-1)return I(t.substring(l,E).replace(M,e));if(e!==c||t[E+1]!==c){if(e===c||0===E||t[E-1]!==c){-1!==C&&C<E+1&&(C=t.indexOf(n,E+1)),-1!==R&&R<E+1&&(R=t.indexOf(r,E+1));var A=z(-1===R?C:Math.min(C,R));if(t.substr(E+1+A,g)===n){b.push(t.substring(l,E).replace(M,e)),t[l=E+1+A+g]!==e&&(E=t.indexOf(e,l)),C=t.indexOf(n,l),R=t.indexOf(r,l);break}var O=z(R);if(t.substring(E+1+O,E+1+O+m)===r){if(b.push(t.substring(l,E).replace(M,e)),N(E+1+O+m),C=t.indexOf(n,l),E=t.indexOf(e,l),$&&(L(),f))return F();if(a&&v.length>=a)return F(!0);break}x.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:v.length,index:l}),E++}}else E++}return I();function T(t){v.push(t),_=l}function z(e){var n=0;if(-1!==e){var r=t.substring(E+1,e);r&&""===r.trim()&&(n=r.length)}return n}function I(e){return d||(void 0===e&&(e=t.substring(l)),b.push(e),l=h,T(b),$&&L()),F()}function N(e){l=e,T(b),b=[],R=t.indexOf(r,l)}function F(t){return{data:v,errors:x,meta:{delimiter:n,linebreak:r,aborted:f,truncated:!!t,cursor:_+(s||0)}}}function L(){o(F()),v=[],x=[]}},this.abort=function(){f=!0},this.getCharIndex=function(){return l}}function m(t){var e=t.data,n=i[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){r=!0,y(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:$,resume:$};if(w(n.userStep)){for(var s=0;s<e.results.data.length&&(n.userStep({data:e.results.data[s],errors:e.results.errors,meta:e.results.meta},o),!r);s++);delete e.results}else w(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!r&&y(e.workerId,e.results)}function y(t,e){var n=i[t];w(n.userComplete)&&n.userComplete(e),n.terminate(),delete i[t]}function $(){throw new Error("Not implemented.")}function v(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=v(t[n]);return e}function x(t,e){return function(){t.apply(e,arguments)}}function w(t){return"function"==typeof t}return r&&(e.onmessage=function(t){var n=t.data;if(void 0===s.WORKER_ID&&n&&(s.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:s.WORKER_ID,results:s.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var r=s.parse(n.input,n.config);r&&e.postMessage({workerId:s.WORKER_ID,results:r,finished:!0})}}),(c.prototype=Object.create(u.prototype)).constructor=c,(l.prototype=Object.create(u.prototype)).constructor=l,(f.prototype=Object.create(f.prototype)).constructor=f,(d.prototype=Object.create(u.prototype)).constructor=d,s}();var Lt=Ft,jt={};!function(t){!function(t,e,n){function r(t){var e=this,n=function(){var t=4022871197,e=function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)};return e}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function i(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function o(t,e){var n=new r(t),o=e&&e.state,s=n.next;return s.int32=function(){return 4294967296*n.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:n&&n.amd?n((function(){return o})):this.alea=o}(0,t,!1)}({get exports(){return jt},set exports(t){jt=t}});var Dt={};!function(t){!function(t,e,n){function r(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function o(t,e){var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:n&&n.amd?n((function(){return o})):this.xor128=o}(0,t,!1)}({get exports(){return Dt},set exports(t){Dt=t}});var Gt={};!function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function o(t,e){var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:n&&n.amd?n((function(){return o})):this.xorwow=o}(0,t,!1)}({get exports(){return Gt},set exports(t){Gt=t}});var Pt={};!function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function i(t,e){return e.x=t.x.slice(),e.i=t.i,e}function o(t,e){null==t&&(t=+new Date);var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&(o.x&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:n&&n.amd?n((function(){return o})):this.xorshift7=o}(0,t,!1)}({get exports(){return Pt},set exports(t){Pt=t}});var qt={};!function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},function(t,e){var n,r,i,o,s,a=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),i=0,o=-32;o<u;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(s=s+1640531527|0,i=0==(n=a[127&o]^=r+s)?i+1:0);for(i>=128&&(a[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=a[i+34&127],n=a[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[i]=r^n;t.w=s,t.X=a,t.i=i}(e,t)}function i(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function o(t,e){null==t&&(t=+new Date);var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&(o.X&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:n&&n.amd?n((function(){return o})):this.xor4096=o}(0,t,!1)}({get exports(){return qt},set exports(t){qt=t}});var Wt={};!function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function i(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function o(t,e){var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:n&&n.amd?n((function(){return o})):this.tychei=o}(0,t,!1)}({get exports(){return Wt},set exports(t){Wt=t}});var Ut={},Bt={get exports(){return Ut},set exports(t){Ut=t}},Ht=Nt(Object.freeze({__proto__:null,default:{}}));!function(t){!function(e,n,r){var i,o=256,s=6,a="random",u=r.pow(o,s),c=r.pow(2,52),l=2*c,f=o-1;function d(t,f,d){var $=[],v=m(g((f=1==f?{entropy:!0}:f||{}).entropy?[t,y(n)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(o):(t=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(t)),y(t)}catch(t){var r=e.navigator,s=r&&r.plugins;return[+new Date,e,s,e.screen,y(n)]}}():t,3),$),x=new h($),w=function(){for(var t=x.g(s),e=u,n=0;t<c;)t=(t+n)*o,e*=o,n=x.g(1);for(;t>=l;)t/=2,e/=2,n>>>=1;return(t+n)/e};return w.int32=function(){return 0|x.g(4)},w.quick=function(){return x.g(4)/4294967296},w.double=w,m(y(x.S),n),(f.pass||d||function(t,e,n,i){return i&&(i.S&&p(i,x),t.state=function(){return p(x,{})}),n?(r[a]=t,e):t})(w,v,"global"in f?f.global:this==r,f.state)}function h(t){var e,n=t.length,r=this,i=0,s=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);i<o;)a[i]=i++;for(i=0;i<o;i++)a[i]=a[s=f&s+t[i%n]+(e=a[i])],a[s]=e;(r.g=function(t){for(var e,n=0,i=r.i,s=r.j,a=r.S;t--;)e=a[i=f&i+1],n=n*o+a[f&(a[i]=a[s=f&s+e])+(a[s]=e)];return r.i=i,r.j=s,n})(o)}function p(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function g(t,e){var n,r=[],i=typeof t;if(e&&"object"==i)for(n in t)try{r.push(g(t[n],e-1))}catch(t){}return r.length?r:"string"==i?t:t+"\0"}function m(t,e){for(var n,r=t+"",i=0;i<r.length;)e[f&i]=f&(n^=19*e[f&i])+r.charCodeAt(i++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(m(r.random(),n),t.exports){t.exports=d;try{i=Ht}catch(t){}}else r["seed"+a]=d}("undefined"!=typeof self?self:It,[],Math)}(Bt);var Zt=jt,Kt=Dt,Jt=Gt,Vt=Pt,Yt=qt,Xt=Wt,Qt=Ut;Qt.alea=Zt,Qt.xor128=Kt,Qt.xorwow=Jt,Qt.xorshift7=Vt,Qt.xor4096=Yt,Qt.tychei=Xt;var te=Qt;function ee(t,e){return t<e?t:e}function ne(t,e,n,r,i,o){for(var s=n,a=ee(s+i,r),u=a,c=ee(u+i,r),l=s;l<c;++l)u<c&&(s>=a||o(e[u],e[s])<0)?t[l]=e[u++]:t[l]=e[s++]}function re(){var t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)}function ie(e,n,r){let i,o=t;e.$$.on_destroy.push((()=>o()));let s,{lights:a}=n;const u=localStorage.getItem("activeGameDate"),l=Rt(JSON.parse(u)||re());function f(){let t=a._getCurrentRound();return t==a.maxRounds?s[t-1]:s[t]}o(),o=c(l,(t=>r(6,i=t))),l.subscribe((t=>{localStorage.setItem("activeGameDate",JSON.stringify(t))}));const d=["AL","AZ","AR","CA","CO","CT","DE","FL","GA","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];return e.$$set=t=>{"lights"in t&&r(1,a=t.lights)},[l,a,f,function(){return{AL:"South",AK:"West",AZ:"West",AR:"South",CA:"West",CO:"West",CT:"Northeast",DE:"South",FL:"South",GA:"South",HI:"West",ID:"West",IL:"Midwest",IN:"Midwest",IA:"Midwest",KS:"Midwest",KY:"South",LA:"South",ME:"Northeast",MD:"South",MA:"Northeast",MI:"Midwest",MN:"Midwest",MS:"South",MO:"Midwest",MT:"West",NE:"Midwest",NV:"West",NH:"Northeast",NJ:"Northeast",NM:"West",NY:"Northeast",NC:"South",ND:"Midwest",OH:"Midwest",OK:"South",OR:"West",PA:"Northeast",RI:"Northeast",SC:"South",SD:"Midwest",TN:"South",TX:"South",UT:"West",VT:"Northeast",VA:"South",WA:"West",WV:"South",WI:"Midwest",WY:"West"}[f().state_id]||null},async function(){try{let t=(await async function(){const t=await fetch("./docs/uscities.csv"),e=await t.text();return new Promise(((t,n)=>{Lt.parse(e,{header:!0,dynamicTyping:!0,complete:e=>t(e.data),error:t=>n(t)})}))}()).filter((t=>d.includes(t.state_id)));const e=re();console.log("Game Date: "+e);const n=te(e);t=function(t,e){var n=[];const r=t.length;n.length=r;for(var i=n,o=t,s=1;s<r;s*=2){for(var a=0;a<r;a+=2*s)ne(i,o,a,r,s,e);var u=o;o=i,i=u}if(o!=t)for(var c=0;c<r;c++)t[c]=o[c];return t}(t,(()=>n()-.5)),s=t.slice(0,a.maxRounds),console.table(s),i!==re()&&(g(l,i=e,i),a.restartGame())}catch(t){console.error(t)}}]}class oe extends yt{constructor(t){super(),mt(this,t,ie,null,s,{lights:1,activeGameDate:0,getCurrentCity:2,getRegion:3,getCitiesForToday:4})}get activeGameDate(){return this.$$.ctx[0]}get getCurrentCity(){return this.$$.ctx[2]}get getRegion(){return this.$$.ctx[3]}get getCitiesForToday(){return this.$$.ctx[4]}}function se(t){let e,n;return{c(){e=C("img"),u(e.src,n="images/"+t[0]+".svg")||O(e,"src",n),O(e,"alt",t[0]),O(e,"width",t[4]),O(e,"height",t[4]),z(e,"transform","rotate("+t[2]+"deg)"),O(e,"class","svelte-1nvft1d")},m(t,n){k(t,e,n)},p(t,r){1&r&&!u(e.src,n="images/"+t[0]+".svg")&&O(e,"src",n),1&r&&O(e,"alt",t[0]),4&r&&z(e,"transform","rotate("+t[2]+"deg)")},d(t){t&&S(e)}}}function ae(t){let e;return{c(){e=R(t[1])},m(t,n){k(t,e,n)},p(t,n){2&n&&T(e,t[1])},d(t){t&&S(e)}}}function ue(e){let n,r,i,o;function s(t,e){return null!=t[1]?ae:se}let a=s(e),u=a(e);return{c(){n=C("button"),u.c(),O(n,"class",r=e[8]+" "+e[6]+" "+e[9]+" "+e[3]+" svelte-1nvft1d"),z(n,"--size",e[7]+"px"),z(n,"--compassSize",ce+"px"),z(n,"margin-left",e[5]+"px")},m(t,r){k(t,n,r),u.m(n,null),i||(o=A(n,"click",e[12]),i=!0)},p(t,[e]){a===(a=s(t))&&u?u.p(t,e):(u.d(1),u=a(t),u&&(u.c(),u.m(n,null))),8&e&&r!==(r=t[8]+" "+t[6]+" "+t[9]+" "+t[3]+" svelte-1nvft1d")&&O(n,"class",r)},i:t,o:t,d(t){t&&S(n),u.d(),i=!1,o()}}}let ce=55;function le(t,e,n){let{type:r=null}=e,{text:i=null}=e,{small:o=!1}=e,s=0,a="disabled";const u=function(){switch(r){case"close":return 20;case"restart":return 30;case"compass":return 50;default:return 25}}(),c="plus"==r?20:0;let l=null!=i?"text":"",f="close"==r?30:50,d=o?"small":"",h="compass"==r?"compass":"";return t.$$set=t=>{"type"in t&&n(0,r=t.type),"text"in t&&n(1,i=t.text),"small"in t&&n(10,o=t.small)},[r,i,s,a,u,c,l,f,d,h,o,function(t){var e;n(3,a=0==t?"disabled":""),n(2,s=(e=s)+(((t-e)%360+540)%360-180))},function(e){U.call(this,t,e)}]}class fe extends yt{constructor(t){super(),mt(this,t,le,ue,s,{type:0,text:1,small:10,setAngle:11})}get setAngle(){return this.$$.ctx[11]}}const de={};function he(t,e={}){const n=[{type:"script",attr:"src",value:`//api.mapbox.com/mapbox-gl-js/${e.version}/mapbox-gl.js`,id:"byk-gl-js"},{type:"link",attr:"href",value:`//api.mapbox.com/mapbox-gl-js/${e.version}/mapbox-gl.css`,id:"byk-gl-css"}],r=e.customStylesheetUrl;r&&n.push({type:"link",attr:"href",value:r,id:"byk-mcsu-css"});let i=()=>{};return function(t,e){for(const{type:n,value:r,id:i}of t){if(document.getElementById(i))return void("script"===n&&e());const t=document.createElement(n);t.id=i,"script"===n?(t.async=!0,t.defer=!0,t.src=r,t.onload=()=>e()):(t.rel="stylesheet",t.href=r),document.body.appendChild(t)}}(n,(()=>{i=function(t,e){window.mapboxgl.accessToken=t.accessToken;const n=new window.mapboxgl.Map(t);return function(t,e,n,r){const i=[];for(const[o,s]of Object.entries(e)){const e=e=>{const[i,o]=s(t,e,n);r.dispatchEvent(new CustomEvent(i,{detail:o}))};t.on(o,e),i.push([o,e])}return()=>{for(const[e,n]of i)t.off(e,n)}}(n,pe,window.mapboxgl,e)}({...e,container:t},t)})),{destroy(){i()}}}const pe={dragend:t=>["dragend",{center:t.getCenter()}],drag:t=>["drag",{center:t.getCenter()}],moveend:t=>["recentre",{center:t.getCenter()}],click:(t,{lngLat:e})=>["click",{lng:e.lng,lat:e.lat}],zoomstart:t=>["zoomstart",{zoom:t.getZoom()}],zoom:t=>["zoom",{zoom:t.getZoom()}],zoomend:t=>["zoomend",{zoom:t.getZoom()}],load:(t,e,n)=>["ready",{map:t,mapbox:n}]};class ge{constructor(){this.queue=Rt([]),this.unsubscribe=null,this.started=!1}send(t,e=[]){t&&this.queue.update((n=>[...n,[t,e]]))}start(t){this.unsubscribe=this.queue.subscribe((e=>{for(;e.length;){const[n,r]=e.shift();t[n].apply(t,r)}})),this.started=!0}stop(){this.started&&(this.unsubscribe(),this.queue=Rt([]),this.started=!1)}}function me(t){let e;const n=t[21].default,r=l(n,t,t[20],null);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,i){r&&r.p&&(!e||1048576&i[0])&&h(r,n,t,t[20],e?d(n,t[20],i,null):p(t[20]),null)},i(t){e||(ut(r,t),e=!0)},o(t){ct(r,t),e=!1},d(t){r&&r.d(t)}}}function ye(e){let n,r,s,a,u=e[0]&&me(e);return{c(){n=C("div"),u&&u.c(),O(n,"class","svelte-1kuj9kb")},m(i,c){var l;k(i,n,c),u&&u.m(n,null),r=!0,s||(a=[(l=he.call(null,n,e[1]),l&&o(l.destroy)?l.destroy:t),A(n,"ready",e[2]),A(n,"recentre",e[22]),A(n,"dragend",e[23]),A(n,"click",e[24]),A(n,"zoomstart",e[25]),A(n,"zoom",e[26]),A(n,"zoomend",e[27]),A(n,"drag",e[28]),A(n,"keydown",e[29])],s=!0)},p(t,e){t[0]?u?(u.p(t,e),1&e[0]&&ut(u,1)):(u=me(t),u.c(),ut(u,1),u.m(n,null)):u&&(st(),ct(u,1,1,(()=>{u=null})),at())},i(t){r||(ut(u),r=!0)},o(t){ct(u),r=!1},d(t){t&&S(n),u&&u.d(),s=!1,i(a)}}}function $e(t,e,n){let{$$slots:r={},$$scope:i}=e,{map:o=null}=e,{version:s="v2.12.0"}=e,{center:a=[0,0]}=e,{zoom:u=9}=e,{zoomRate:c=1}=e,{wheelZoomRate:l=1}=e,{options:f={}}=e,{accessToken:d}=e,{customStylesheetUrl:h=!1}=e,{style:p="mapbox://styles/mapbox/streets-v11"}=e;const g=W();var m,y;let $;m=de,y={getMap:()=>o,getMapbox:()=>$},P().$$.context.set(m,y);const v=Object.assign({accessToken:d,container:undefined,style:p,center:a,zoom:u,zoomRate:c,wheelZoomRate:l,version:s,customStylesheetUrl:h,map:o},f),x=new ge;function w(t,e={}){x.send("setZoom",[t,e])}return q((()=>{x.stop(),n(0,o=void 0)})),t.$$set=t=>{"map"in t&&n(0,o=t.map),"version"in t&&n(3,s=t.version),"center"in t&&n(4,a=t.center),"zoom"in t&&n(5,u=t.zoom),"zoomRate"in t&&n(6,c=t.zoomRate),"wheelZoomRate"in t&&n(7,l=t.wheelZoomRate),"options"in t&&n(8,f=t.options),"accessToken"in t&&n(9,d=t.accessToken),"customStylesheetUrl"in t&&n(10,h=t.customStylesheetUrl),"style"in t&&n(11,p=t.style),"$$scope"in t&&n(20,i=t.$$scope)},t.$$.update=()=>{32&t.$$.dirty[0]&&u&&w(u)},[o,v,function({detail:t}){n(0,o=t.map),$=t.mapbox,x.start(o),g("ready")},s,a,u,c,l,f,d,h,p,function(t,e={}){x.send("fitBounds",[t,e])},function(t,e={}){x.send("flyTo",[t,e])},function(){x.send("resize")},function(t,e={}){x.send("setCenter",[t,e])},w,function(t,e="top-right"){x.send("addControl",[t,e])},function(){return o},function(){return $},i,r,function(e){U.call(this,t,e)},function(e){U.call(this,t,e)},function(e){U.call(this,t,e)},function(e){U.call(this,t,e)},function(e){U.call(this,t,e)},function(e){U.call(this,t,e)},function(e){U.call(this,t,e)},function(e){U.call(this,t,e)}]}let ve=class extends yt{constructor(t){super(),mt(this,t,$e,ye,s,{map:0,version:3,center:4,zoom:5,zoomRate:6,wheelZoomRate:7,options:8,accessToken:9,customStylesheetUrl:10,style:11,fitBounds:12,flyTo:13,resize:14,setCenter:15,setZoom:16,addControl:17,getMap:18,getMapbox:19},null,[-1,-1])}get fitBounds(){return this.$$.ctx[12]}get flyTo(){return this.$$.ctx[13]}get resize(){return this.$$.ctx[14]}get setCenter(){return this.$$.ctx[15]}get setZoom(){return this.$$.ctx[16]}get addControl(){return this.$$.ctx[17]}get getMap(){return this.$$.ctx[18]}get getMapbox(){return this.$$.ctx[19]}};var xe=6371008.8,we={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*xe,kilometers:6371.0088,kilometres:6371.0088,meters:xe,metres:xe,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:xe/1852,radians:1,yards:6967335.223679999};function be(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function _e(t){return 180*(t%(2*Math.PI))/Math.PI}function ke(t){return t%360*Math.PI/180}function Se(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Ce(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Re(t,e,n){void 0===n&&(n={});var r=Ce(t),i=Ce(e),o=ke(i[1]-r[1]),s=ke(i[0]-r[0]),a=ke(r[1]),u=ke(i[1]),c=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return function(t,e){void 0===e&&(e="kilometers");var n=we[e];if(!n)throw new Error(e+" units is invalid");return t*n}(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}function Me(t,e,n,r){void 0===r&&(r={});var i=Ce(t),o=ke(i[0]),s=ke(i[1]),a=ke(n),u=function(t,e){void 0===e&&(e="kilometers");var n=we[e];if(!n)throw new Error(e+" units is invalid");return t/n}(e,r.units),c=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(a));return function(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Se(t[0])||!Se(t[1]))throw new Error("coordinates must contain numbers");return be({type:"Point",coordinates:t},e,n)}([_e(o+Math.atan2(Math.sin(a)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(c))),_e(c)],r.properties)}function Ee(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<r;s++)o.push(Me(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),function(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return be({type:"Polygon",coordinates:t},e,n)}([o],i)}function Ae(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=Ae(e,t);return n=(n+180)%360}(t,e);var r=Ce(t),i=Ce(e),o=ke(r[0]),s=ke(i[0]),a=ke(r[1]),u=ke(i[1]),c=Math.sin(s-o)*Math.cos(u),l=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return _e(Math.atan2(c,l))}function Oe(t){let e,n;return e=new fe({props:{type:"compass",class:"compass"}}),t[20](e),e.$on("click",t[3](750,!1)),{c(){dt(e.$$.fragment)},m(t,r){ht(e,t,r),n=!0},p(t,n){e.$set({})},i(t){n||(ut(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(n){t[20](null),pt(e,n)}}}function Te(t){let e,n,r,i,o,s,a={lights:t[1]};n=new oe({props:a}),t[18](n);i=new ve({props:{accessToken:"pk.eyJ1Ijoia3lqb2huc29uMDkiLCJhIjoiY2xmb2gyNDhhMHZiMzN6cGZyd2hjendkeSJ9.0_uG5PL4M8XWUD-4tDPIBQ",options:{doubleClickZoom:!1}}}),t[19](i),i.$on("click",t[9]),i.$on("ready",t[8]);let u=t[7]&&Oe(t);return{c(){e=C("div"),dt(n.$$.fragment),r=M(),dt(i.$$.fragment),o=M(),u&&u.c(),O(e,"class","map svelte-yawwus"),z(e,"height",t[0]+t[10]-252+"px")},m(t,a){k(t,e,a),ht(n,e,null),w(e,r),ht(i,e,null),w(e,o),u&&u.m(e,null),s=!0},p(t,r){const o={};2&r[0]&&(o.lights=t[1]),n.$set(o);i.$set({}),t[7]?u?(u.p(t,r),128&r[0]&&ut(u,1)):(u=Oe(t),u.c(),ut(u,1),u.m(e,null)):u&&(st(),ct(u,1,1,(()=>{u=null})),at()),(!s||1&r[0])&&z(e,"height",t[0]+t[10]-252+"px")},i(t){s||(ut(n.$$.fragment,t),ut(i.$$.fragment,t),ut(u),s=!0)},o(t){ct(n.$$.fragment,t),ct(i.$$.fragment,t),ct(u),s=!1},d(r){r&&S(e),t[18](null),pt(n),t[19](null),pt(i),u&&u.d()}}}function ze(e,n,r){let i,o=t;e.$$.on_destroy.push((()=>o()));let s,a,u,{height:l}=n,{lights:f}=n,{modal:d}=n,{nav:h}=n,{actions:p}=n;const m=localStorage.getItem("markersSaved"),y=Rt(JSON.parse(m)||[]);o(),o=c(y,(t=>r(26,i=t))),y.subscribe((t=>{localStorage.setItem("markersSaved",JSON.stringify(t))}));let $=[],v=[];function x(){return u.getMap()}let w=[-98,37.25];const b=[[w[0],w[1]-13.25],[w[0],w[1]+13.25]];let _,k,S,C=!1;function R(){_=s.getCurrentCity(),h.updateRegion(s.getRegion()),k=[_.lng,_.lat],p.hideCredits()}function M(t,e,n){var r=document.createElement("div");r.className="marker",r.style.fontSize="30px",r.style.width="31.5px",r.innerHTML=e.emoji;let o=new mapboxgl.Marker(r);o.setLngLat(t),o.addTo(x()),$.push(o),n&&(i.push({guessLocation:t,guess:e}),y.set(i))}function E(t,e,n){let r=0;if(f.isBestGuessSoFar(n.accuracy))return void a.setAngle(r);const i=Ae(t,k),o=e*Math.sin(i*Math.PI/180),s=e*Math.cos(i*Math.PI/180);r=Math.abs(o)>=Math.abs(s)?o>=0?45:-135:s>=0?-45:135,a.setAngle(r)}function A(t){let e=f.guessMap[t];var n={type:"Feature",geometry:{type:"Point",coordinates:k},properties:{radius:e.radius}};let r={id:"circle-layer"+t,type:"fill",source:{type:"geojson",data:Ee(k,n.properties.radius,{steps:64,units:"miles"})},paint:{"fill-color":e.color,"fill-opacity":.5}};x().addLayer(r),v.push(r)}function O(t,e){e?u.flyTo({center:k,zoom:S,duration:t}):x().fitBounds(b)}function T(){g(y,i=[],i)}let z=window.matchMedia&&window.matchMedia("(max-width: 400px)").matches?0:22;return e.$$set=t=>{"height"in t&&r(0,l=t.height),"lights"in t&&r(1,f=t.lights),"modal"in t&&r(11,d=t.modal),"nav"in t&&r(12,h=t.nav),"actions"in t&&r(13,p=t.actions)},[l,f,y,O,s,a,u,C,async function(){if(r(7,C=!0),x().fitBounds(b,{animate:!1}),S=x().getZoom(),await s.getCitiesForToday(),R(),f.isStartOfGame())T(),d.toggleHelp();else if(f.isGameOver()){let t=f.getLatestGuessAccuracy()==f.winAccuracy;d.gameOver(_,t)}let t;for(let e=0;e<i.length;e++)M(i[e].guessLocation,i[e].guess,!1),t=i[e].guessLocation;f.isGameOver()?(A(2),A(3),A(4),A(5)):null!=t&&setTimeout((()=>{const e=[parseFloat(t[0]).toFixed(4),parseFloat(t[1]).toFixed(4)],n=Math.floor(Re(k,e,{units:"miles"})),r=f.getGuessAccuracy(n);E(e,n,f.guessMap[r])}),100)},function(t){const e=t.detail;if(void 0===e.lng||void 0===e.lat)return;if(f.isGameOver())return void d.gameOver(_,f.getLatestGuessAccuracy()==f.winAccuracy);const n=[e.lng.toFixed(4),e.lat.toFixed(4)];console.log("guessed: "+n);const r=Math.floor(Re(k,n,{units:"miles"}));console.log("miles away: "+r);const i=f.getGuessAccuracy(r),o=f.guessMap[i];f.makeGuess(i),M(n,o,!0),console.log("accuracy: "+i),f.isGameOver()?(A(2),A(3),A(4),A(5),d.gameOver(_,i==f.winAccuracy),a.setAngle(0),O(2e3,!0)):E(n,r,o)},z,d,h,p,function(){u.flyTo({center:x().getCenter(),zoom:x().getZoom()+1})},function(){u.flyTo({center:x().getCenter(),zoom:x().getZoom()-1})},T,function(t){for(let t=0;t<$.length;t++)$[t].remove();$=[];for(let t=0;t<v.length;t++)x().removeLayer(v[t].id),x().removeSource(v[t].id);v=[],t?T():f.resetForNextRound(),a.setAngle(0),R(),O(null,!1)},function(t){H[t?"unshift":"push"]((()=>{s=t,r(4,s)}))},function(t){H[t?"unshift":"push"]((()=>{u=t,r(6,u)}))},function(t){H[t?"unshift":"push"]((()=>{a=t,r(5,a)}))}]}class Ie extends yt{constructor(t){super(),mt(this,t,ze,Te,s,{height:0,lights:1,modal:11,nav:12,actions:13,markersSaved:2,reset:3,zoomIn:14,zoomOut:15,clearSavedMarkers:16,nextRound:17},null,[-1,-1])}get markersSaved(){return this.$$.ctx[2]}get reset(){return this.$$.ctx[3]}get zoomIn(){return this.$$.ctx[14]}get zoomOut(){return this.$$.ctx[15]}get clearSavedMarkers(){return this.$$.ctx[16]}get nextRound(){return this.$$.ctx[17]}}function Ne(e){let n,r;return{c(){n=C("div"),r=R("Created by Kyle Johnson"),O(n,"class","credits svelte-1rpn7f8"),z(n,"margin-top",e[2]+"px")},m(t,e){k(t,n,e),w(n,r)},p:t,d(t){t&&S(n)}}}function Fe(t){let e,n,r,i,s,a,u,c,l,f,d;n=new fe({props:{type:"restart"}}),n.$on("click",(function(){o(t[0].reset(750,!1))&&t[0].reset(750,!1).apply(this,arguments)})),a=new fe({props:{type:"minus"}}),a.$on("click",(function(){o(t[0].zoomOut)&&t[0].zoomOut.apply(this,arguments)})),c=new fe({props:{type:"plus"}}),c.$on("click",(function(){o(t[0].zoomIn)&&t[0].zoomIn.apply(this,arguments)}));let h=t[1]&&Ne(t);return{c(){e=C("div"),dt(n.$$.fragment),r=M(),i=C("div"),s=M(),dt(a.$$.fragment),u=M(),dt(c.$$.fragment),l=M(),h&&h.c(),f=E(),O(i,"class","spacer svelte-1rpn7f8"),O(e,"class","actions svelte-1rpn7f8")},m(t,o){k(t,e,o),ht(n,e,null),w(e,r),w(e,i),w(e,s),ht(a,e,null),w(e,u),ht(c,e,null),k(t,l,o),h&&h.m(t,o),k(t,f,o),d=!0},p(e,[n]){(t=e)[1]?h?h.p(t,n):(h=Ne(t),h.c(),h.m(f.parentNode,f)):h&&(h.d(1),h=null)},i(t){d||(ut(n.$$.fragment,t),ut(a.$$.fragment,t),ut(c.$$.fragment,t),d=!0)},o(t){ct(n.$$.fragment,t),ct(a.$$.fragment,t),ct(c.$$.fragment,t),d=!1},d(t){t&&S(e),pt(n),pt(a),pt(c),t&&S(l),h&&h.d(t),t&&S(f)}}}function Le(t,e,n){let{map:r}=e,{lights:i}=e;i.getScore();let o=!0;var s;s=async()=>{},P().$$.on_mount.push(s);let a=window.matchMedia&&window.matchMedia("(max-width: 400px)").matches?6:-2;return t.$$set=t=>{"map"in t&&n(0,r=t.map),"lights"in t&&n(3,i=t.lights)},[r,o,a,i,function(t){},function(){setTimeout((()=>{n(1,o=!1)}),400)}]}class je extends yt{constructor(t){super(),mt(this,t,Le,Fe,s,{map:0,lights:3,updateScore:4,hideCredits:5})}get updateScore(){return this.$$.ctx[4]}get hideCredits(){return this.$$.ctx[5]}}const De=t=>({}),Ge=t=>({});function Pe(t){let e,n,r,o,s,a,u,c,f,g,m,y,$,v;const x=t[4].header,b=l(x,t,t[3],Ge);u=new fe({props:{type:"close",small:"true"}}),u.$on("click",t[1]);const _=t[4].default,R=l(_,t,t[3],null);return{c(){e=C("div"),r=M(),o=C("div"),s=C("div"),b&&b.c(),a=M(),dt(u.$$.fragment),c=M(),f=C("hr"),g=M(),R&&R.c(),O(e,"class","modal-background svelte-1k9xs39"),O(s,"class","header svelte-1k9xs39"),O(o,"class","modal svelte-1k9xs39"),O(o,"role","dialog"),O(o,"aria-modal","true")},m(n,i){k(n,e,i),k(n,r,i),k(n,o,i),w(o,s),b&&b.m(s,null),w(s,a),ht(u,s,null),w(o,c),w(o,f),w(o,g),R&&R.m(o,null),t[5](o),y=!0,$||(v=[A(window,"keydown",t[2]),A(e,"click",t[1])],$=!0)},p(t,[e]){b&&b.p&&(!y||8&e)&&h(b,x,t,t[3],y?d(x,t[3],e,De):p(t[3]),Ge),R&&R.p&&(!y||8&e)&&h(R,_,t,t[3],y?d(_,t[3],e,null):p(t[3]),null)},i(t){y||(Y((()=>{n||(n=ft(e,vt,{},!0)),n.run(1)})),ut(b,t),ut(u.$$.fragment,t),ut(R,t),Y((()=>{m||(m=ft(o,wt,{},!0)),m.run(1)})),y=!0)},o(t){n||(n=ft(e,vt,{},!1)),n.run(0),ct(b,t),ct(u.$$.fragment,t),ct(R,t),m||(m=ft(o,wt,{},!1)),m.run(0),y=!1},d(s){s&&S(e),s&&n&&n.end(),s&&S(r),s&&S(o),b&&b.d(s),pt(u),R&&R.d(s),t[5](null),s&&m&&m.end(),$=!1,i(v)}}}function qe(t,e,n){let{$$slots:r={},$$scope:i}=e;const o=W(),s=()=>o("close");let a;const u="undefined"!=typeof document&&document.activeElement;return u&&q((()=>{u.focus()})),t.$$set=t=>{"$$scope"in t&&n(3,i=t.$$scope)},[a,s,t=>{if("Escape"!==t.key){if("Tab"===t.key){const e=a.querySelectorAll("*"),n=Array.from(e).filter((t=>t.tabIndex>=0));let r=n.indexOf(document.activeElement);-1===r&&t.shiftKey&&(r=0),r+=n.length+(t.shiftKey?-1:1),r%=n.length,n[r].focus(),t.preventDefault()}}else s()},i,r,function(t){H[t?"unshift":"push"]((()=>{a=t,n(0,a)}))}]}class We extends yt{constructor(t){super(),mt(this,t,qe,Pe,s,{})}}function Ue(t){let e,n;return e=new We({props:{$$slots:{header:[He],default:[Be]},$$scope:{ctx:t}}}),e.$on("close",t[12]),{c(){dt(e.$$.fragment)},m(t,r){ht(e,t,r),n=!0},p(t,n){const r={};16385&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(ut(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(t){pt(e,t)}}}function Be(t){let e,n,r,i,o,s,a,u,c,l,f,d,h,p,g,m,y,$,v=t[0].maxGuesses+"";return y=new fe({props:{text:"Start Game"}}),y.$on("click",t[1]),{c(){e=C("br"),n=M(),r=C("b"),i=R("Guess the location in "),o=R(v),s=R(" tries"),a=M(),u=C("ul"),u.innerHTML='<li class="svelte-3iter9">The location is a city in the 48 states</li> \n      <li class="svelte-3iter9">Your marker color reflects how far away you are</li> \n      <li class="svelte-3iter9">Use the compass\n        <img src="images/compass.svg" alt="compass preview" width="30" height="30" class="svelte-3iter9"/>\n        to your advantage</li>',c=M(),l=C("br"),f=M(),d=C("h3"),d.textContent="Legend",h=M(),p=C("div"),g=C("ul"),g.innerHTML="<li>⚫️ Very Far</li> \n        <li>🔴 Far</li> \n        <li>🟠 Near</li> \n        <li>🟡 Close</li> \n        <li>🟢 Found</li>",m=M(),dt(y.$$.fragment),O(u,"class","instructions svelte-3iter9"),O(d,"class","svelte-3iter9"),O(g,"class","no-style svelte-3iter9"),O(p,"class","bottom svelte-3iter9")},m(t,v){k(t,e,v),k(t,n,v),k(t,r,v),w(r,i),w(r,o),w(r,s),k(t,a,v),k(t,u,v),k(t,c,v),k(t,l,v),k(t,f,v),k(t,d,v),k(t,h,v),k(t,p,v),w(p,g),w(p,m),ht(y,p,null),$=!0},p(t,e){(!$||1&e)&&v!==(v=t[0].maxGuesses+"")&&T(o,v)},i(t){$||(ut(y.$$.fragment,t),$=!0)},o(t){ct(y.$$.fragment,t),$=!1},d(t){t&&S(e),t&&S(n),t&&S(r),t&&S(a),t&&S(u),t&&S(c),t&&S(l),t&&S(f),t&&S(d),t&&S(h),t&&S(p),pt(y)}}}function He(e){let n;return{c(){n=C("h2"),n.textContent="How To Play",O(n,"slot","header"),O(n,"class","svelte-3iter9")},m(t,e){k(t,n,e)},p:t,d(t){t&&S(n)}}}function Ze(t){let e,n;return e=new We({props:{$$slots:{header:[Xe],default:[Ye]},$$scope:{ctx:t}}}),e.$on("close",t[13]),{c(){dt(e.$$.fragment)},m(t,r){ht(e,t,r),n=!0},p(t,n){const r={};16481&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(ut(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(t){pt(e,t)}}}function Ke(e){let n,r;return n=new fe({props:{text:"Share Result"}}),n.$on("click",e[8]),{c(){dt(n.$$.fragment)},m(t,e){ht(n,t,e),r=!0},p:t,i(t){r||(ut(n.$$.fragment,t),r=!0)},o(t){ct(n.$$.fragment,t),r=!1},d(t){pt(n,t)}}}function Je(e){let n,r;return n=new fe({props:{text:"Share Result"}}),n.$on("click",e[7]),{c(){dt(n.$$.fragment)},m(t,e){ht(n,t,e),r=!0},p:t,i(t){r||(ut(n.$$.fragment,t),r=!0)},o(t){ct(n.$$.fragment,t),r=!1},d(t){pt(n,t)}}}function Ve(e){let n,r;return n=new fe({props:{text:"Next Round"}}),n.$on("click",e[2]),{c(){dt(n.$$.fragment)},m(t,e){ht(n,t,e),r=!0},p:t,i(t){r||(ut(n.$$.fragment,t),r=!0)},o(t){ct(n.$$.fragment,t),r=!1},d(t){pt(n,t)}}}function Ye(t){let e,n,r,i,o,s,a,u,c,l,f,d,h,p,g,m,y,$,v,x,b,_,E,A,z,I,N,F,L,j,D,G,P,q,W=t[5].city+"",U=t[5].state_id+"",B=t[5].population.toLocaleString()+"",H=t[0].getRoundScore()+"",Z=t[0].getMaxRoundScore()+"",K=t[0].hasNextRound()?"Total":"Final",J=t[0].getScore()+"",V=t[0].getMaxScore()+"";const Y=[Ve,Je,Ke],X=[];function Q(t,e){return 1&e&&(D=null),null==D&&(D=!!t[0].hasNextRound()),D?0:navigator.share?1:2}return G=Q(t,-1),P=X[G]=Y[G](t),{c(){e=C("br"),n=M(),r=C("p"),i=R("The city was "),o=R(W),s=R(", "),a=R(U),u=M(),c=C("p"),l=R("Population: "),f=R(B),d=M(),h=C("br"),p=M(),g=C("div"),m=C("div"),y=C("span"),$=R("Round score: "),v=R(H),x=R("/"),b=R(Z),_=M(),E=C("div"),A=C("b"),z=R(K),I=R(" score: "),N=R(J),F=R("/"),L=R(V),j=M(),P.c(),O(g,"class","bottom svelte-3iter9")},m(t,S){k(t,e,S),k(t,n,S),k(t,r,S),w(r,i),w(r,o),w(r,s),w(r,a),k(t,u,S),k(t,c,S),w(c,l),w(c,f),k(t,d,S),k(t,h,S),k(t,p,S),k(t,g,S),w(g,m),w(m,y),w(y,$),w(y,v),w(y,x),w(y,b),w(m,_),w(m,E),w(E,A),w(A,z),w(A,I),w(A,N),w(A,F),w(A,L),w(g,j),X[G].m(g,null),q=!0},p(t,e){(!q||32&e)&&W!==(W=t[5].city+"")&&T(o,W),(!q||32&e)&&U!==(U=t[5].state_id+"")&&T(a,U),(!q||32&e)&&B!==(B=t[5].population.toLocaleString()+"")&&T(f,B),(!q||1&e)&&H!==(H=t[0].getRoundScore()+"")&&T(v,H),(!q||1&e)&&Z!==(Z=t[0].getMaxRoundScore()+"")&&T(b,Z),(!q||1&e)&&K!==(K=t[0].hasNextRound()?"Total":"Final")&&T(z,K),(!q||1&e)&&J!==(J=t[0].getScore()+"")&&T(N,J),(!q||1&e)&&V!==(V=t[0].getMaxScore()+"")&&T(L,V);let n=G;G=Q(t,e),G===n?X[G].p(t,e):(st(),ct(X[n],1,1,(()=>{X[n]=null})),at(),P=X[G],P?P.p(t,e):(P=X[G]=Y[G](t),P.c()),ut(P,1),P.m(g,null))},i(t){q||(ut(P),q=!0)},o(t){ct(P),q=!1},d(t){t&&S(e),t&&S(n),t&&S(r),t&&S(u),t&&S(c),t&&S(d),t&&S(h),t&&S(p),t&&S(g),X[G].d()}}}function Xe(t){let e,n,r=t[6]?"City Found!":t[0].hasNextRound()?"Limit Reached":"Game Over";return{c(){e=C("h2"),n=R(r),O(e,"slot","header"),O(e,"class","svelte-3iter9")},m(t,r){k(t,e,r),w(e,n)},p(t,e){65&e&&r!==(r=t[6]?"City Found!":t[0].hasNextRound()?"Limit Reached":"Game Over")&&T(n,r)},d(t){t&&S(e)}}}function Qe(t){let e,n,r,i=t[3]&&Ue(t),o=t[4]&&Ze(t);return{c(){i&&i.c(),e=M(),o&&o.c(),n=E()},m(t,s){i&&i.m(t,s),k(t,e,s),o&&o.m(t,s),k(t,n,s),r=!0},p(t,[r]){t[3]?i?(i.p(t,r),8&r&&ut(i,1)):(i=Ue(t),i.c(),ut(i,1),i.m(e.parentNode,e)):i&&(st(),ct(i,1,1,(()=>{i=null})),at()),t[4]?o?(o.p(t,r),16&r&&ut(o,1)):(o=Ze(t),o.c(),ut(o,1),o.m(n.parentNode,n)):o&&(st(),ct(o,1,1,(()=>{o=null})),at())},i(t){r||(ut(i),ut(o),r=!0)},o(t){ct(i),ct(o),r=!1},d(t){i&&i.d(t),t&&S(e),o&&o.d(t),t&&S(n)}}}function tn(t,e,n){let r,i,o,s,{map:a}=e,{lights:u}=e,{actions:c}=e;return t.$$set=t=>{"map"in t&&n(9,a=t.map),"lights"in t&&n(0,u=t.lights),"actions"in t&&n(10,c=t.actions)},[u,function(){n(3,r=!r)},function(){n(4,i=!1),a.nextRound()},r,i,o,s,function(){const t={title:"City Seeker",text:`I scored ${u.getScore()}/${u.getMaxScore()}`};navigator.share(t).then((()=>console.log("Shared successfully"))).catch((t=>console.log(`Error sharing: ${t}`)))},function(){let t=`City Seeker ${u.getScore()}/${u.getMaxScore()}\n\n`;t+=u.getGuessesGridAsEmoji(),alert(t)},a,c,function(t,e){n(4,i=!0),n(5,o=t),n(6,s=e),c.updateScore(u.getScore())},()=>n(3,r=!1),()=>n(4,i=!1)]}class en extends yt{constructor(t){super(),mt(this,t,tn,Qe,s,{map:9,lights:0,actions:10,toggleHelp:1,nextRound:2,gameOver:11})}get toggleHelp(){return this.$$.ctx[1]}get nextRound(){return this.$$.ctx[2]}get gameOver(){return this.$$.ctx[11]}}function nn(t){let e,n,r={modal:t[4],lights:t[1]};return e=new St({props:r}),t[7](e),{c(){dt(e.$$.fragment)},m(t,r){ht(e,t,r),n=!0},p(t,n){const r={};16&n&&(r.modal=t[4]),2&n&&(r.lights=t[1]),e.$set(r)},i(t){n||(ut(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(n){t[7](null),pt(e,n)}}}function rn(t){let e,n,r={lights:t[1],map:t[2]};return e=new je({props:r}),t[10](e),{c(){dt(e.$$.fragment)},m(t,r){ht(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.lights=t[1]),4&n&&(r.map=t[2]),e.$set(r)},i(t){n||(ut(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(n){t[10](null),pt(e,n)}}}function on(t){let e,n,r,i,o,s,a,u,c,l,f;Y(t[6]);let d=void 0!==t[1]&&nn(t),h={map:t[2],actions:t[3],nav:t[0]};r=new zt({props:h}),t[8](r);let p={height:t[5],lights:t[1],modal:t[4],actions:t[3],nav:t[0]};o=new Ie({props:p}),t[9](o);let g=void 0!==t[1]&&rn(t),m={lights:t[1],map:t[2],actions:t[3]};return u=new en({props:m}),t[11](u),{c(){e=C("main"),d&&d.c(),n=M(),dt(r.$$.fragment),i=M(),dt(o.$$.fragment),s=M(),g&&g.c(),a=M(),dt(u.$$.fragment)},m(h,p){k(h,e,p),d&&d.m(e,null),w(e,n),ht(r,e,null),w(e,i),ht(o,e,null),w(e,s),g&&g.m(e,null),w(e,a),ht(u,e,null),c=!0,l||(f=A(window,"resize",t[6]),l=!0)},p(t,[i]){void 0!==t[1]?d?(d.p(t,i),2&i&&ut(d,1)):(d=nn(t),d.c(),ut(d,1),d.m(e,n)):d&&(st(),ct(d,1,1,(()=>{d=null})),at());const s={};4&i&&(s.map=t[2]),8&i&&(s.actions=t[3]),1&i&&(s.nav=t[0]),r.$set(s);const c={};32&i&&(c.height=t[5]),2&i&&(c.lights=t[1]),16&i&&(c.modal=t[4]),8&i&&(c.actions=t[3]),1&i&&(c.nav=t[0]),o.$set(c),void 0!==t[1]?g?(g.p(t,i),2&i&&ut(g,1)):(g=rn(t),g.c(),ut(g,1),g.m(e,a)):g&&(st(),ct(g,1,1,(()=>{g=null})),at());const l={};2&i&&(l.lights=t[1]),4&i&&(l.map=t[2]),8&i&&(l.actions=t[3]),u.$set(l)},i(t){c||(ut(d),ut(r.$$.fragment,t),ut(o.$$.fragment,t),ut(g),ut(u.$$.fragment,t),c=!0)},o(t){ct(d),ct(r.$$.fragment,t),ct(o.$$.fragment,t),ct(g),ct(u.$$.fragment,t),c=!1},d(n){n&&S(e),d&&d.d(),t[8](null),pt(r),t[9](null),pt(o),g&&g.d(),t[11](null),pt(u),l=!1,f()}}}function sn(t,e,n){let r,i,o,s,a,u;return[r,i,o,s,a,u,function(){n(5,u=window.innerHeight)},function(t){H[t?"unshift":"push"]((()=>{r=t,n(0,r)}))},function(t){H[t?"unshift":"push"]((()=>{i=t,n(1,i)}))},function(t){H[t?"unshift":"push"]((()=>{o=t,n(2,o)}))},function(t){H[t?"unshift":"push"]((()=>{s=t,n(3,s)}))},function(t){H[t?"unshift":"push"]((()=>{a=t,n(4,a)}))}]}const an=new class extends yt{constructor(t){super(),mt(this,t,sn,on,s,{})}}({target:document.body});return document.ondblclick=function(t){t.preventDefault()},an}();
//# sourceMappingURL=bundle.js.map
